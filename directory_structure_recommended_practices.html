 <div class="container ng-scope">
    <div class="d-flex align-items-end">
       <div class="mr-auto">
          <h1 class="EB-36 blue mt-5 mb-0">Directory Structure</h1>
       </div>
       <div class="ml-auto d-none d-sm-block">
          <a class="SSP-18 blue-underline" href="/">Home</a>
          <span class="SSP-18 grey"> / </span>
          <a class="SSP-18 blue-underline" href="/community">Community</a>
          <span class="SSP-18 grey"> / </span>
          <a class="SSP-18 blue-underline" href="/community/ship-operators">For Ship Operators</a>
          <span class="SSP-18 grey"> / </span>
          <a class="SSP-18 grey" href="/community/ship-operators/underway">Directory Structure</a>
       </div>
    </div>
    <hr>
    <div class="my-5">
       <p class="SSP-20 grey">
          <i>This is the recommended (not required) cruise data directory structure for R2R participating operators, intended as guidance when designing your vessel acquisition system.</i>
       </p>
       <p class="SSP-20 grey text-right">
          <i>(last updated 2024-12-04)</i>
       </p>
       <h2 class="SSP-20 grey bold">Design Goals</h2>
       <ol class="SSP-20 grey">
          <li>
             <p>Preserve original "full"-resolution data from the instruments - especially primary navigation.</p>
          </li>
          <li>
             <p>Organize files in a fleet-standard directory structure that can be routinely "broken out" shoreside by regular expression matching against vessel instrument profile.
             </p>
             <ul>
                <li>Segregate the "routine underway" data (resident digital instrument systems) from everything else (science party files, visiting national facility data, etc).</li>
                <li>Segregate data from documentation.</li>
                <li>Segregate the original instrument data from secondary products and/or processed data.</li>
                <li>Segregate the standard, underway data and documentation collected by the vessel operator from that generated by the science party.</li>
             </ul>
             <p></p>
          </li>
          <li>
             <p>Preserve all of the standard, underway data and documentation collected by the vessel operator organized as it was provided to the science party.</p>
          </li>
       </ol>
       <h2>Standardize the Directory Structure</h2>
       <ul class="SSP-20 grey">
          <li>R2R uses regexes to map files to devices.</li>
          <li>Consolidating and standardizing data directories and files within distros, it is easier for R2R to maintain up-to-date mapping and ensure that it identifies all relevant data files.</li>
          <ul>
             <li>Acquisition systems are an effective means of standardizing the directory structure for serial devices while performing other useful bookkeeping procedures like enforcing valid filenames.</li>
             <li>A standardized directory structure also helps scientists who work across multiple vessels.</li>
          </ul>
       </ul>
       <h2 class="SSP-20 grey bold">Directory Tree</h2>
       <ul class="SSP-20 grey no-bullet mt-4">
          <li>
             <strong>CRUISEID /</strong>
             <ul class="no-bullet">
                <li>
                   <strong>docs /</strong> - general cruise docs eg. personnel list, operations report, vessel diagrams
                </li>
                <li>
                   <strong>SYSTEM / </strong> - where <i>SYSTEM</i> is either the vessel's native serial acquisition system ( <i>OpenRVDAS, OpenVDM, scs, lds, suds, vids, etc</i> ) or a standalone system ( <i>adcp, ctd, echo, multibeam, xbt, etc</i>)
                   <ul class="no-bullet">
                      <li>
                         <strong>docs / </strong> - manuals, photos, calibration sheets, etc. specific to this instrument system
                      </li>
                      <li>
                         <strong>raw / </strong>
                         <ul class="no-bullet">
                            <li>
                               <strong>DEVICETYPE [_[ MAKE ][ MODEL ]][_LOCATION ][_MNEMONIC ] - DATE T TIME Z</strong>
                               <p class="mb-0">where <i>MNEMONIC</i> allows finer-grained separation of devce interfaces</p>
                               <p class="mb-0">(could be serial number, datatype ("centerbeam"), or just a number 1, 2, 3)</p>
                            </li>
                         </ul>
                      </li>
                      <li>
                         <strong>proc / </strong> - if processing was done at sea
                      </li>
                      <li>
                         <strong>r2r/</strong>
                         <ul class="no-bullet">
                            <li>
                               <strong>elog / </strong> - produced by (or formatted for) the R2R Event Logger
                            </li>
                         </ul>
                      </li>
                      <li>
                         <strong>science / </strong> - "dropbox" files created by the science party including photos, blogs, etc. This directory is provided to separate science party information from that of the vessel operator and <b>should <i>not</i> be included in the cruise distribution provided to R2R</b>.
                      </li>
                   </ul>
                </li>
             </ul>
          </li>
       </ul>
       <h2 class="SSP-20 bold grey">Recommended Practices</h2>
       <ul class="SSP-20 grey">
          <li>Cruise IDs are unique within R2R. The exact naming style is left to each operator, but IDs should begin with the vessel's <a class="grey-underline" href="/about/technical-details/vocabularies/vessel">unique prefix</a>.</li>
          <li>Directory and file names use standard vocabulary of <a class="grey-underline" href="/about/technical-details/vocabularies/device-type">device type</a> , make, and model. Names are lowercase, with no spaces or non-alphanumeric characters except nonconsecutive underscores and periods. R2R will never modify any original file received from an operator.</li>
          <li>Some operators support simultaneous acquisition of both original/full-resolution and subsampled/multiplexed data. These should be clearly separated in the directory structure.</li>
          <li>Write all data from the same "talker" (i.e. multiple NMEA sentences from the same GNSS receiver port) to the same file. Break data files daily where possible.</li>
          <li>Some vessels log both original/full-resolution and multiplexed/subsampled data files. These should be clearly separated in the directory structure.</li>
          <li>Individual files are not compressed. The entire cruise distro may be packaged with GNU tar/gzip.</li>
          <li>Operator delivers a checksum manifest with each distro so that R2R can validate shoreside, using the <a href="http://md5deep.sourceforge.net/" class="grey-underline">md5deep</a> program: <i>md5deep -c -r -l -o f -t -z cruise &gt; cruise.md5deep</i></li>
          <li>Cruise distros are posted for R2R to download via network transfer (rsync) or shipped on a USB portable drive with NTFS or EXT3 filesystem. These distros should include only standard, underway data and documentation collected by the vessel operator. Science party data should not be included.</li>
       </ul>
    </div>
 </div>
