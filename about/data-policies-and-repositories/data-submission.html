<h2 class="header h2">Cruise, Vessel, and Device Information</h2>
<p class="mainbody">The Rolling Deck to Repository program (R2R; rvdata.us) provides shore-side data management for routine
         underway environmental sensor data collected on US academic research vessels. This work is a collaboration with vessel operators
          and chief scientists. The <a href="https://www.rvdata.us/community/roles-responsibilities">Research Vessel Data Management Roles and Responsibilities</a>
           document gives a high-level description of
           the various operator, Chief Scientist and R2R responsibilities, whereas this document describes in detail how operators should
            provide their data to R2R. For guidance on metadata that R2R expects from ship operators please see <a href="https://www.rvdata.us/about/technical-details/metadata">Metadata Requirements</a>.</p>
<h2 class="header h2">R2R needs the following information from vessel operators</h2>
<ul class="mainbody">
  <li>A description of all standard underway devices onboard the vessel, including make, model, location and filenames of data in directory structure
         and <a href="#" onclick="document.getElementById('format-documentation-header').scrollIntoView({behavior: 'smooth'}); return false;">data format description</a>. R2R should be notified of any changes in equipment or data location before sending a cruise data distribution.
          Operators are encouraged to use the <a href="https://www.rvdata.us/community/ship-operators/directory-structure">standard directory structure</a>
           for cruise data developed by the R2R program and the operator community. </li>
  <li>Cruise data distribution(s):
    <ul class="mainbody">
      <li>Includes only vessel operated, underway data in standard format as described to R2R for this operator/vessel</li>
      <li>Includes Navigation Data (at least one clearly-identified, full resolution GPS data set for creating a simple ship track on a location map)</li>
      <li>Includes an md5deep text file in the root directory (this is explained <a href="#deep-checksum-files-header">below</a>).</li>

      <li>Excludes any science party data, <a href="https://www.dol.gov/general/ppii">Personal Identifiable Information (PII)</a>, recreational communications
        or imagery, anything that would be
        <a href="https://www.copyright.gov/help/faq/faq-definitions.html">copyright infringement</a> (music, movies, …), etc.</li>
        <li>Excludes data collected by dedicated facilities such as the National Marine Seismic Facility (NMSF),
        <a href="https://www.unols.org/ships-facilities/national-deep-submergence-facility-ndsf">National Deep Submergence Facility (NDSF)</a> or 
        <a href="https://obsic.whoi.edu/experiments/obsip-experiment-archive/">The Ocean Bottom Seismic Instrument Center (OBSIC)</a>. Such data are already
          archived by other programs.</li>
    </ul>
  </li>
  <li>Cruise metadata, including cruise ID, chief scientist, departure/arrival ports, dates, and funding source information. The best way to submit this information to R2R is by entering it into the <a href="https://www.unols.org/mfp-user-guide-operators">Marine Facility Planning</a> system. If you do not use the MFP, you are responsible for contacting R2R for further guidance. Do not change cruise identifiers (i.e. cruise codes such as RR1808) once data or metadata related to that cruise have been provided to R2R. R2R uses cruise identifiers to uniquely identify cruises throughout its workflow, and Cruise ID changes require substantial effort.</li>
</ul>
<h2 class="header h2">Data Submission Guidelines</h2>
<ul class="mainbody">
  <li>Submit Data Early
    <ul class="mainbody">
      <li>R2R should receive new cruise data distributions (“distros”) on at least a quarterly basis.</li>
      <li>Timely submission of data expedites the data publication process and gives R2R more time to verify and validate network-transmitted data.</li>
    </ul>
  </li>
  <li>Avoid Data Update Requests<ul class="mainbody">
      <li>It is difficult to make changes to data once they have been processed at R2R, and particularly if they have been archived at the NOAA National Centers for Environmental Information.</li>
      <li>Please provide complete, finalized distros.</li>
      <li>If changes are needed, please communicate with R2R in advance of sending a new distro.</li>
    </ul>
  </li>
  <li>Separate Oversize Filesets<ul class="mainbody">
      <li>Filesets over 500 gigabytes, such as those commonly generated by the SBP-29 & EK-80, should be separated from the rest of their distros and sent to R2R as separate tarballs.</li>
      <li>The directory structure of the separate distro should match that of the original such that, if both were merged, the result would be identical to the original distro.</li>
    </ul>
  </li>
  <li>Network Transfers (Globus)<ul class="mainbody">
    <li>R2R is moving away from physical storage handoffs to network transfers.</li>
    <li>R2R's preferred network transfer method is Globus.
      <ul class="mainbody">
	      <li>Globus performs checks on all transmitted data to ensure file integrity remains uncompromised, and ensures security of the transfer.</li>
	      <li>Pushing data to R2R's endpoint <b>does not</b> require a subscription.<ul class="mainbody">
	      <li>If you are pushing a particularly large distro, please let us know by emailing <a href="mailto:info@rvdata.us">info@rvdata.us</a> beforehand!</li>
	      <li>R2R is happy to help you set up and configure Globus.</li>
	    </ul>
	  </li>
	</ul>
      </li>
    </ul>
  </li>
  <li>Include Deep Checksum Files (.md5deep extension)
    <ul class="mainbody">
      <li>md5deep files list the contents of a distro and generate md5 checksums for each file. R2R uses these files to verify that its copy of the distro matches the operator's copy.</li>
      <li>These files are created "manually" by running the md5deep command line tool on the completed cruise distro (after the cruise has ended). To do this, the tool must first be installed. Follow the instructions below:</li>
      <li>First verify that the hashdeep command line tool isn't already installed. If it is, then you should be able to call it from the command line with <code>md5deep -h</code>. If your terminal doesn't recognize the command then follow the appropriate step below.
          <ul>
              <li>If you're on Linux or Mac OS then install the hashdeep (same thing as md5deep) command line tool using your system's package manager. For example: <code>dnf install hashdeep</code> for RHEL, <code>apt install hashdeep</code> for Ubuntu, or <code>install hashdeep</code> for Mac OS.</li> 
              <li>If you're on Windows then download the Github release binary (the one called "md5deep-4.4.zip") <a href="https://github.com/jessek/hashdeep/releases">here</a>. Unzip the downloaded folder and locate the correct ".exe" file: <code>md5deep64.exe</code>. Add the directory containing this file to your system's PATH environment variable.</li>
          </ul>
      </li>
      <li>Once hashdeep is installed, navigate into the directory containing the target cruise directory. For this example assume the cruise directory is named <code>SP2411</code>.
          <ol>
              <li>Extract/Unzip the cruise directory if you haven't already - md5deep operates on directories not files.</li>
              <li>If you're on Mac OS/Linux then run this command: <code>md5deep -c -r -l -o f -t -z SP2411 > SP2411/SP2411.md5deep</code>. This command was tested with the 4.4 version of md5deep.</li>
              <li>If you're on Windows run: <code>md5deep64.exe -c -r -l -o f -t -z SP2411 > SP2411\SP2411.md5deep</code></li>
              <li>Wait for the command to complete. Once it does, you'll see the md5deep file inside your cruise directory.</li>
          </ol>
      </li>  
    </ul>
  </li>
  <li>Safe and Effective File Naming
    <ul class="mainbody">
      <li>Include a date string in your raw data filenames as <code>YYYY-MM-DD</code>. If a device produces multiple files a day then use the hour/minute/second/millisecond at the time of acquisition to further distinguish as needed. Avoid Julian Day date/time strings as it's hard to detect and parse. We do actually use these date/time strings to verify that each file belongs to the correct cruise package.</li>
      <li>Don't put special characters in filenames. Examples of problem file names:
          <ul>
              <li>“Seapath_330_User's_Guide.pdf”: this shouldn't have an apostrophe.</li>
              <li>“Knudsen comparison with SBP39_top line of Oceanus Z_W-bound_same line, same time.jpg”: this shouldn't have commas or spaces.</li>
          </ul>
      </li>
	  </ul>
  </li>
  <li>Regularly Maintain Device Format Documentation
    <ul class="mainbody">
      <li>Many data users need more information to fully use a data set than is contained in data files alone. Data format descriptions meet this need by supplying this information. In addition, these documents will be useful to R2R in the future to support search-by-parameter features and automated checks on the data.</li>
      <li>
        A data format description document should be included for each device type in the distro in a top-level “docs” directory. These descriptions should contain the name of the device, parameter names/description of all the fields in the data, structure, units, etc. Please include this for each NMEA string if you are using NMEA formats. Use this example as a template:
        <ul>
          <li>
            <a class="mc" href="/recommended_practices/example_format_document">Example format document</a>
          </li>
        </ul>
      </li>
      <li>Keep format documents up to date through time.</li>
    </ul>
  </li>
  <li>Data-Specific Asks
    <ul class="mainbody">
      <li>Check for empty files i.e. not zero-byte but missing required data.</li>
      <li>Include gravity ties and magnetometer layback in every distro even if not collected during an active cruise. Store these files in a consistent directory with a consistent naming scheme.</li>
      <li>If gravimeter data is part of a data acquisition system then gravity ties should be stored in the acquisition system's docs directory. If gravimeter data is a standalone data set within the distro then gravity ties should be stored in the distro's top-level docs directory. Keep gravity tie filenames consistent. A good filename format is <code>gravtie_&lt;date&gt;.pdf</code>. The exact format doesn't need to match exactly but must include the date and must be consistent.</li>
      <li>Confirm water column sonar data contains navigation.
        <ul>
          <li>Lack of navigation in wcd data creates downstream issues for archiving at NCEI.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<h2 class="header h2">Data/Metadata Transfer Methods</h2>
<p class="mainbody"><a href="https://www.globus.org/">Globus</a> is the preferred method for transferring cruise data to R2R. The R2R team would be happy to work with operators/technicians on getting Globus set up. If Globus is not feasible, please contact R2R to discuss a SFTP SSH/rsync or cloud download approach.</p>
<p class="mainbody">To transfer data via Globus:</p>
<ol class="mainbody">
  <li><b>Get Globus Connect:</b> Download Globus Personal Connect or check for institutional site license.</li>
  <li><b>Create Account:</b> Register <a href="https://www.globusid.org/create">here</a>.</li>
  <li><b>Set Up Endpoint:</b> Configure an endpoint for your cruise data directory.</li>
  <li><b>Share ID:</b> Send your Globus ID to <b>info@rvdata.us</b>. We'll set up your landing spot.</li>
  <li><b>Test Transfer:</b> Upload a small test file to R2R to verify access.</li>
  <li><b>Notify for Large Transfers:</b> Please inform us before uploading large cruise data so we can confirm disk space.</li>
  <li><b>Help/Tutorials:</b> <a href="https://docs.globus.org/guides/tutorials/manage-files/">link</a></li>
</ol>
<h2 class="header h2">Questions? Need help?</h2>
<p class="mainbody">Please <a class="blue" href="/contact">Contact Us</a></p>
